# تطبيق متابعة الصلاة 🕌

تطبيق ويب شامل لمتابعة وتسجيل الصلوات اليومية مع إحصائيات تفصيلية وتقارير شهرية.

## 📋 نظرة عامة على المشروع

هذا التطبيق مصمم لمساعدة المسلمين في متابعة صلواتهم اليومية، سواء الفرائض أو النوافل، مع توفير إحصائيات مفصلة وتقارير شهرية لتحفيز المستخدم على المحافظة على الصلاة.

## 🗂️ هيكل الملفات

### الملفات الرئيسية:

#### 1. **index.html**
- **الوظيفة**: نقطة الدخول الرئيسية للتطبيق
- **الوظيفة**: يعيد توجيه المستخدم تلقائياً إلى صفحة اختيار المستخدم
- **الكود**: `window.location.href = 'user-select.html';`

#### 2. **user-select.html**
- **الوظيفة**: صفحة اختيار المستخدم أو إنشاء مستخدم جديد
- **المميزات**:
  - عرض جميع المستخدمين المسجلين
  - إمكانية حذف المستخدمين
  - إضافة مستخدم جديد
  - استيراد بيانات من ملف JSON
- **التخزين**: يستخدم localStorage لحفظ بيانات المستخدمين

#### 3. **user-setup.html**
- **الوظيفة**: صفحة إعداد المستخدم الجديد
- **المميزات**:
  - إدخال اسم المستخدم
  - اختيار الأفاتار (8 خيارات)
  - اختيار لون المظهر (12 لون)
- **البيانات المحفوظة**:
  ```javascript
  {
    username: "اسم المستخدم",
    avatar: "👤",
    color: "blue",
    createdAt: "2024-01-01T00:00:00.000Z"
  }
  ```

#### 4. **prayer-dashboard.html**
- **الوظيفة**: اللوحة الرئيسية لتسجيل ومتابعة الصلوات اليومية
- **المكونات الرئيسية**:
  - **دوائر التقدم**: لعرض نسبة إنجاز الفرائض والنوافل
  - **قسم الفرائض**: 5 صلوات (الفجر، الظهر/الجمعة، العصر، المغرب، العشاء)
  - **قسم النوافل**: 3 صلوات (سنة الفجر، الضحى، الوتر)
  - **الإحصائيات**: النسبة الإجمالية وعدد الأيام المتتالية

- **وظائف التسجيل**:
  - تسجيل الصلاة كمكتملة
  - تسجيل الركعات الفائتة لكل صلاة
  - حفظ البيانات في localStorage
  - تحديث الواجهة فورياً

- **المميزات الخاصة**:
  - تحديد صلاة الجمعة تلقائياً يوم الجمعة
  - رسوم متحركة عند إكمال جميع الصلوات
  - عرض التاريخ والوقت الحالي

#### 5. **table-view.html**
- **الوظيفة**: عرض جدولي شامل لجميع أيام الشهر
- **المميزات**:
  - جدول يعرض كل يوم مع حالة كل صلاة
  - إمكانية تعديل أي صلاة بالنقر عليها
  - تحديد/إلغاء تحديد جميع صلوات اليوم
  - تصدير البيانات إلى CSV
  - ألوان مختلفة حسب حالة اليوم:
    - أخضر: جميع الفرائض مكتملة
    - أحمر: يوجد فرائض مفقودة
    - أصفر: اليوم الحالي مع فرائض مفقودة

#### 6. **monthly-report.html**
- **الوظيفة**: تقرير شهري مع تقويم تفاعلي
- **المكونات**:
  - **إحصائيات شهرية**: متوسط الفرائض، النوافل، والإجمالي
  - **تقويم تفاعلي**: كل يوم ملون حسب الأداء
  - **تفاصيل اليوم**: عند النقر على أي يوم
  - **تعديل سريع**: إمكانية تعديل صلوات أي يوم

- **نظام الألوان**:
  - أخضر: 100% (مكتمل)
  - أزرق: 80-99% (ممتاز)
  - أصفر: 50-79% (جيد)
  - أحمر: أقل من 50% (يحتاج تحسين)

#### 7. **missed-prayers-summary.html**
- **الوظيفة**: ملخص الصلوات المفقودة (غير المسجلة)
- **المعلومات المعروضة**:
  - عدد الأيام التي تحتوي على صلوات مفقودة
  - إجمالي الصلوات المفقودة
  - أكثر صلاة مفقودة
  - تفاصيل كل يوم مع الصلوات المفقودة

#### 8. **missed-rakaat-summary.html**
- **الوظيفة**: ملخص الركعات الفائتة (التي تحتاج قضاء)
- **المعلومات المعروضة**:
  - عدد الأيام التي تحتوي على ركعات فائتة
  - إجمالي الركعات الفائتة
  - أكثر صلاة تحتوي على ركعات فائتة
  - تفاصيل كل يوم مع عدد الركعات الفائتة لكل صلاة

### الملفات المساعدة:

#### 9. **sidebar.js**
- **الوظيفة**: مكون الشريط الجانبي للتنقل
- **المميزات**:
  - قائمة تنقل بين جميع الصفحات
  - عرض معلومات المستخدم الحالي
  - أزرار التصدير والاستيراد
  - تغيير المستخدم
  - تصميم متجاوب للهواتف المحمولة

#### 10. **glassmorphism.css**
- **الوظيفة**: ملف CSS فارغ (مخصص للتأثيرات المستقبلية)

#### 11. **prayer-dashboard copy.html**
- **الوظيفة**: نسخة تجريبية من اللوحة الرئيسية مع بيانات وهمية

## 🔧 كيفية عمل التطبيق

### 1. **نظام إدارة المستخدمين**
```javascript
// حفظ المستخدم الحالي
localStorage.setItem('currentUser', username);

// حفظ بيانات المستخدم
localStorage.setItem(`user_${username}`, JSON.stringify(profile));
```

### 2. **نظام تخزين البيانات**
```javascript
// مفتاح التخزين: prayers_[username]_[year]_[month]
const key = `prayers_${currentUser}_${year}_${month}`;

// هيكل البيانات لكل يوم:
{
  "1": {
    "fajr": { "completed": true, "missedRakaat": 0 },
    "dhuhr": { "completed": true, "missedRakaat": 1 },
    "asr": { "completed": false, "missedRakaat": 0 },
    "maghrib": { "completed": true, "missedRakaat": 0 },
    "isha": { "completed": true, "missedRakaat": 0 },
    "fajr-sunnah": true,
    "duha": false,
    "witr": true
  }
}
```

### 3. **حساب الإحصائيات**
```javascript
// حساب نسبة الفرائض
const fardCompleted = Object.values(prayerState.fard)
  .filter(prayer => prayer.completed).length;
const fardPercentage = (fardCompleted / 5) * 100;

// حساب نسبة النوافل
const naflCompleted = Object.values(prayerState.nafl)
  .filter(Boolean).length;
const naflPercentage = (naflCompleted / 3) * 100;

// النسبة الإجمالية
const totalPercentage = ((fardCompleted + naflCompleted) / 8) * 100;
```

### 4. **نظام الأيام المتتالية (Streak)**
```javascript
function calculateStreak() {
  let streak = 0;
  // فحص الأيام السابقة من الأمس
  for (let day = today - 1; day >= 1; day--) {
    const dayData = monthData[day] || {};
    const fardCount = /* حساب الفرائض المكتملة */;
    const naflCount = /* حساب النوافل المكتملة */;
    const hasNoMissedRakaat = /* فحص عدم وجود ركعات فائتة */;
    
    if (fardCount + naflCount === 8 && hasNoMissedRakaat) {
      streak++;
    } else {
      break;
    }
  }
  return streak;
}
```

### 5. **نظام صلاة الجمعة الذكي**
```javascript
// تحديد صلاة الجمعة تلقائياً
function updateFridayPrayer() {
  const now = new Date();
  const isFriday = now.getDay() === 5; // 5 = الجمعة
  
  if (isFriday) {
    // تغيير النص من "الظهر (4 ركعات)" إلى "الجمعة (2 ركعة)"
    document.getElementById('dhuhr-name').textContent = 'الجمعة (2 ركعة)';
    
    // تحديث خيارات الركعات الفائتة لتناسب ركعتين فقط
    const select = document.getElementById('dhuhr-select');
    select.innerHTML = `
      <option value="0">لا يوجد فوات</option>
      <option value="1">ركعة واحدة</option>
      <option value="2">ركعتان</option>
    `;
  }
}

// تطبيق منطق الجمعة في جميع أنحاء التطبيق
function getPrayerName(prayer, day) {
  if (prayer === 'dhuhr') {
    const dayDate = new Date(new Date().getFullYear(), new Date().getMonth(), day);
    const isFriday = dayDate.getDay() === 5;
    return isFriday ? 'الجمعة' : 'الظهر';
  }
  // باقي الصلوات...
}
```

**المميزات الخاصة بصلاة الجمعة:**
- 🕌 **تحديد تلقائي**: يتم تحديد يوم الجمعة تلقائياً وتغيير "الظهر" إلى "الجمعة"
- 🔢 **ركعتان فقط**: تتغير خيارات الركعات الفائتة من 4 ركعات إلى ركعتين فقط
- 📅 **تطبيق شامل**: يعمل النظام في جميع الصفحات (اللوحة الرئيسية، الجدول، التقارير)
- 📊 **إحصائيات دقيقة**: تحسب الإحصائيات بناءً على العدد الصحيح للركعات (2 للجمعة، 4 للظهر)
- 🗓️ **تاريخ ذكي**: يحدد التاريخ الصحيح لكل يوم ويطبق قواعد الجمعة تلقائياً

## 📱 المميزات الرئيسية

### 1. **تسجيل الصلوات**
- ✅ تسجيل الفرائض الخمس
- ✅ تسجيل النوافل (سنة الفجر، الضحى، الوتر)
- ✅ تسجيل الركعات الفائتة لكل صلاة
- 🕌 **تحديد صلاة الجمعة تلقائياً** (ركعتان بدلاً من 4 ركعات الظهر)
- 📅 تمييز أيام الجمعة في جميع التقارير والجداول

### 2. **الإحصائيات والتقارير**
- 📊 دوائر تقدم تفاعلية
- 📅 تقويم شهري ملون
- 📋 جدول تفصيلي لكل يوم
- 📈 حساب الأيام المتتالية
- ⚠️ تقارير الصلوات المفقودة
- 🔢 تقارير الركعات الفائتة

### 3. **إدارة المستخدمين**
- 👤 دعم متعدد المستخدمين
- 🎨 تخصيص الأفاتار والألوان
- 🔄 تبديل بين المستخدمين
- 🗑️ حذف المستخدمين

### 4. **التصدير والاستيراد**
- 💾 تصدير البيانات إلى JSON
- 📄 تصدير التقارير إلى CSV
- 📁 استيراد البيانات من ملف JSON
- 🔒 نسخ احتياطية آمنة

### 5. **التصميم المتجاوب**
- 📱 متوافق مع الهواتف المحمولة
- 🖥️ متوافق مع أجهزة الكمبيوتر
- 🎨 تصميم عصري مع Tailwind CSS
- 🌙 ألوان مريحة للعين

## 🚀 كيفية الاستخدام

### الخطوة 1: البدء
1. افتح `index.html` في المتصفح
2. سيتم توجيهك تلقائياً لصفحة اختيار المستخدم

### الخطوة 2: إنشاء مستخدم
1. انقر على "إضافة مستخدم جديد"
2. أدخل اسمك
3. اختر أفاتار ولون مفضل
4. انقر "حفظ وبدء الاستخدام"

### الخطوة 3: تسجيل الصلوات
1. في اللوحة الرئيسية، انقر على "مكتملة" لكل صلاة أديتها
2. إذا فاتتك ركعات، اختر العدد من القائمة المنسدلة
3. انقر على النوافل لتسجيلها
4. ستحدث الإحصائيات تلقائياً

### الخطوة 4: مراجعة التقارير
1. استخدم القائمة الجانبية للتنقل
2. راجع التقرير الشهري لرؤية أدائك
3. تحقق من الصلوات المفقودة والركعات الفائتة
4. استخدم العرض الجدولي للتعديل السريع

## 💾 نظام التخزين

التطبيق يستخدم `localStorage` لحفظ البيانات محلياً في المتصفح:

### مفاتيح التخزين:
- `currentUser`: المستخدم الحالي
- `user_[username]`: بيانات المستخدم
- `prayers_[username]_[year]_[month]`: بيانات الصلوات الشهرية
- `sidebarOpen`: حالة الشريط الجانبي

### مثال على البيانات المحفوظة:
```javascript
// بيانات المستخدم
{
  "username": "أحمد",
  "avatar": "👨",
  "color": "blue",
  "createdAt": "2024-01-01T00:00:00.000Z"
}

// بيانات الصلوات
{
  "1": {
    "fajr": { "completed": true, "missedRakaat": 0 },
    "dhuhr": { "completed": true, "missedRakaat": 0 },
    "asr": { "completed": true, "missedRakaat": 0 },
    "maghrib": { "completed": true, "missedRakaat": 0 },
    "isha": { "completed": true, "missedRakaat": 0 },
    "fajr-sunnah": true,
    "duha": true,
    "witr": true
  }
}
```

## 🎨 التقنيات المستخدمة

- **HTML5**: هيكل الصفحات
- **CSS3**: التنسيق والتصميم
- **JavaScript**: المنطق والتفاعل
- **Tailwind CSS**: إطار عمل CSS
- **SVG**: الرسوم المتحركة والأيقونات
- **localStorage**: تخزين البيانات محلياً
- **Responsive Design**: التصميم المتجاوب

## 🔮 المميزات المستقبلية المحتملة

- 🔔 تذكيرات أوقات الصلاة
- 📍 تحديد القبلة
- 🌙 تقويم هجري
- 📊 إحصائيات سنوية
- 🏆 نظام الإنجازات والشارات
- 🌐 مزامنة البيانات عبر الأجهزة
- 📱 تطبيق هاتف محمول
- 🎵 أصوات الأذان

## 📝 ملاحظات مهمة

1. **الخصوصية**: جميع البيانات محفوظة محلياً في المتصفح
2. **النسخ الاحتياطية**: استخدم ميزة التصدير لحفظ بياناتك
3. **التوافق**: يعمل على جميع المتصفحات الحديثة
4. **الأداء**: سريع ولا يحتاج اتصال إنترنت
5. **اللغة**: مصمم باللغة العربية مع دعم RTL
6. **التصميم**: التصميم يكون على النمط الاسلامي

---

**بارك الله فيك وتقبل منك صالح الأعمال** 🤲